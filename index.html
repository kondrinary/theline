<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Death Melody</title>

  <!-- CSS -->
  <link rel="stylesheet" href="./styles.css" />

  <!-- Firebase (compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <!-- Config must go BEFORE main.js -->
  <script src="./config.js"></script>
</head>

<body>
  <!-- фон (iframe) -->
  <iframe id="bgA" class="bg-flame" src="./bgA.html"></iframe>
  <iframe id="bgB" class="bg-flame" src="./bgB.html" style="opacity:0;"></iframe>

  <!-- верхняя строка (контакты / дебаг) -->
  <div id="contactsBar"></div>
  <div id="debugInfo">
    <div class="di-center" id="debugCenter"></div>
  </div>
  <div class="debug-side" id="dbLeft"></div>
  <div class="debug-side" id="dbRight"></div>

  <!-- правая часть: поток дат -->
  <section id="right">
    <div id="stream"></div>
  </section>

  <!-- нижняя панель -->
  <section id="left">
    <div class="left-inner">

      <!-- форма (скрыта до старта) -->
      <div id="formSection">
        <input id="birthInput" inputmode="numeric" placeholder="дата рождения (дд.мм.гггг)" autocomplete="off" />
        <button id="nowPlayInline" type="button"></button>
        <button id="addBtn" type="button"></button>
      </div>

      <!-- OK / ERROR -->
      <div id="okBar" hidden></div>
      <div id="errorBar" hidden></div>

      <!-- описание -->
      <div class="card" id="introBox">
        <div class="title" id="projectTitle">Название проекта</div>
        <div class="desc" id="introDesc">Описание проекта</div>
      </div>

      <!-- кнопка старта (в правой колонке) -->
      <button id="startBtn" type="button"></button>

    </div>
  </section>

  <!-- ЛОГИКА -->
  <script src="./data.js"></script>
  <script src="./visual.js"></script>
  <script src="./player.js"></script>
  <script src="./overlay.fx.js"></script>
  <script src="./synth.params.js"></script>
  <script src="./synth.js"></script>
  <script src="./main.js"></script>

  <!-- только переключение фона по клику (оставляю как в твоём варианте) -->
  <script>
    const startBtn = document.getElementById('startBtn');
    startBtn.addEventListener('click', () => {
      const a = document.getElementById('bgA');
      const b = document.getElementById('bgB');
      const opA = parseFloat(a.style.opacity || '1');
      a.style.opacity = (opA > 0.5) ? '0' : '1';
      b.style.opacity = (opA > 0.5) ? '1' : '0';
    });
  </script>
</body>
</html>
